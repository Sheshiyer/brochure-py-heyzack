<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ company_info.name }} Product Catalog</title>
    <link rel="stylesheet" href="static/css/{{ theme }}.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Cover Page (Intro Image) -->
    <section class="cover-page intro-image">
        <div class="intro-image-container">
            <img src="static/images/intro.png" alt="HeyZack Smart Living" class="intro-cover-image">
        </div>
    </section>

    <!-- Product Showcase -->
    <main class="product-showcase">
        {% set product_counter = namespace(value=1) %}
        {% set total_products_count = grouped_products.values() | map('length') | sum %}
        {% for category, category_products in grouped_products.items() %}
            {% for product in category_products %}
            {% set layout_type = 'default' %}
            {% if total_products_count >= 4 and total_products_count <= 6 %}
                {% if product_counter.value % 6 == 1 %}
                    {% set layout_type = 'hero-left' %}
                {% elif product_counter.value % 6 == 2 %}
                    {% set layout_type = 'hero-right' %}
                {% elif product_counter.value % 6 == 3 %}
                    {% set layout_type = 'left-image-right-content' %}
                {% elif product_counter.value % 6 == 4 %}
                    {% set layout_type = 'right-image-left-content' %}
                {% elif product_counter.value % 6 == 5 %}
                    {% set layout_type = 'grid-showcase' %}
                {% else %}
                    {% set layout_type = 'specs-focus' %}
                {% endif %}
            {% elif total_products_count >= 5 %}
                {% if product_counter.value % 8 == 1 %}
                    {% set layout_type = 'hero-left' %}
                {% elif product_counter.value % 8 == 2 %}
                    {% set layout_type = 'hero-right' %}
                {% elif product_counter.value % 8 == 3 %}
                    {% set layout_type = 'left-image-right-content' %}
                {% elif product_counter.value % 8 == 4 %}
                    {% set layout_type = 'right-image-left-content' %}
                {% elif product_counter.value % 8 == 5 %}
                    {% set layout_type = 'category-grid' %}
                {% elif product_counter.value % 8 == 6 %}
                    {% set layout_type = 'grid-showcase' %}
                {% elif product_counter.value % 8 == 7 %}
                    {% set layout_type = 'specs-focus' %}
                {% else %}
                    {% set layout_type = 'minimal-grid' %}
                {% endif %}
            {% endif %}
            <section class="product-page layout-{{ layout_type }}" data-product="{{ product_counter.value }}" data-layout="{{ layout_type }}">
                <div class="product-layout layout-{{ layout_type }}">
                    <!-- Hero Image Section -->
                    <div class="hero-section">
                        <div class="product-number">
                            <span class="number">{{ "%02d"|format(product_counter.value) }}</span>
                        </div>
                        <div class="hero-image">
                            {% if product.hero_image %}
                            <img src="{{ product.hero_image }}" alt="{{ product.name }}" loading="lazy">
                            {% else %}
                            <div class="image-placeholder">
                                <span class="placeholder-text">{{ product.name[:2]|upper }}</span>
                            </div>
                            {% endif %}

                        </div>
                        <div class="category-label">
                            <span>{{ category|upper }}</span>
                        </div>
                    </div>

                    <!-- Product Details Section -->
                    <div class="details-section">
                        <div class="product-header">
                            <h2 class="product-title">{{ product.name }}</h2>
                            <p class="product-model">{% if product.model and product.model.strip() %}{{ product.model }}{% else %}{{ product.supplier }} {{ product.category }}{% endif %}</p>
                        </div>

                        <div class="product-description">
                            {% if product.short_description and product.short_description.strip() %}
                                <p>{{ product.short_description }}</p>
                            {% elif product.specifications and product.specifications.description and product.specifications.description.strip() %}
                                <p>{{ product.specifications.description[:200] }}{% if product.specifications.description|length > 200 %}...{% endif %}</p>
                            {% else %}
                                <p>Professional {{ product.category|lower }} solution from {{ product.supplier }} designed for smart home applications.</p>
                            {% endif %}
                        </div>

                        <!-- Features Section -->
                        <div class="features">
                            <h3 class="spec-title">FEATURES</h3>
                            <div class="features-content">
                                {% if product.features %}
                                    <ul class="features-list">
                                        {% for feature in product.features[:5] %}
                                            <li class="feature-item">{{ feature }}</li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>No features available for this product.</p>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Specifications Section -->
                        <div class="specifications">
                            <h3 class="spec-title">PRODUCT SPECIFICATIONS</h3>
                            <div class="spec-content">
                                {% if product.specifications %}
                                    <div class="specifications-text">{{ product.specifications }}</div>
                                {% else %}
                                    <p>No specifications available for this product.</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="product-footer">
                            <div class="supplier-info">
                                {{ product.supplier if product.supplier else 'Premium Supplier' }}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Page Number -->
                <div class="page-number">
                    <span>{{ product_counter.value }}</span>
                </div>
            </section>
            {% set product_counter.value = product_counter.value + 1 %}
            {% endfor %}
        {% endfor %}
    </main>

    <!-- Back Cover -->
    <section class="back-cover">
        <div class="back-content">
            <h3>Why Choose HeyZack?</h3>
            <div class="value-grid">
                <div class="value-item">
                    <h4>AI Guardian Technology</h4>
                    <p>Proactive home management</p>
                </div>
                <div class="value-item">
                    <h4>Complete Integration</h4>
                    <p>All devices work seamlessly together</p>
                </div>
                <div class="value-item">
                    <h4>Professional Support</h4>
                    <p>Dedicated partner success program</p>
                </div>
                <div class="value-item">
                    <h4>30% Partner Margins</h4>
                    <p>Industry-leading profitability</p>
                </div>
            </div>
        </div>
    </section>

    <script src="static/js/brochure.js"></script>
</body>
</html>
